<!DOCTYPE html>
<html>
<head>
	<meta httpEquiv="Content-Type" value="text/html;charset=utf-8">

	<title>pwl.widget.form.TextboxList</title>

	<style type="text/css">
		@import url('../../../../dijit/themes/tundra/tundra.css');
		@import url('../../resources/test.css');
		@import url('../../../themes/proxia/proxia.css');
	</style>

	<script type="text/javascript">

	var djConfig =
	{
		parseOnLoad: true,
		isDebug: true,
		debugAtAllCosts: true,
		modulePaths:
		{
			'pwl' : '../pwl'
		},
		locale: 'sk',
		fakeIdKey: '029ba297-df6b-45d1-b405-a362c7b8ebbf965ba361',
		clientId: 'ce53688a-13be-40b8-a680-659af2d549d9',
		//serviceRoot: 'http://localhost/Academy-Client/src/academy/tests/servicemockup'
		serviceRoot: 'http://sirius.esoft.sk/~remeselnik/Academy-Client/src/academy/tests/servicemockup'
	};

	</script>

	<!-- required: dojo.js -->
	<script type="text/javascript" src="../../../../dojo/dojo.js"></script>

	<script language="JavaScript" type="text/javascript">
		dojo.require('academy.StoreManager');
		dojo.require('pwl.widget.form.TwoLevelCheckList');

		dojo.addOnLoad( function ()
		{
			academy['Session'] =
			{
				'identity': {id: 1},
				'key': dojo.config.fakeIdKey,
				'active_organization': {code: 'esoft'}
			};
			var store = academy.StoreManager.getStore({target: '/twolevelchecklist', cacheBydefault: false});
			
			dijit.byId('W1').set('store',store);
			
			/*
			var s1_label = new dojo.data.ItemFileWriteStore(
			{
				data:
				{
					identifier: 'id',
					items: [
						{id: 1, given_name: 'Peter', family_name: 'Ivan'},
						{id: 2, given_name: 'Roman', family_name: 'Vrto'},
						{id: 3, given_name: 'Ondrej', family_name: 'Remeselnik'},
						{id: 4, given_name: 'Jozef', family_name: 'Drak'},
						{id: 5, given_name: 'Jan', family_name: 'Melich'},
						{id: 6, given_name: 'Valeria', family_name: 'Ciamporova'},
						{id: 7, given_name: 'Alena', family_name: 'Ostrihonova'},
						{id: 8, given_name: 'Alena', family_name: 'Matuskova'},
						{id: 9, given_name: 'Dobroslav', family_name: 'Chrobak'},
						{id: 10, given_name: 'Margita', family_name: 'Figuli'}
					]
				}
			});

			var s1_value = new dojo.data.ItemFileWriteStore(
			{
				data:
				{
					identifier: 'id',
					items: [
						{id: 1, given_name: 'Peter', family_name: 'Ivan'},
						{id: 3, given_name: 'Ondrej', family_name: 'Remeselnik'},
						{id: 4, given_name: 'Jozef', family_name: 'Drak'},
						{id: 6, given_name: 'Valeria', family_name: 'Ciamporova'},
						{id: 10, given_name: 'Margita', family_name: 'Figuli'}
					]
				}
			});

			var s2_value = new dojo.data.ItemFileWriteStore(
			{
				data:
				{
					identifier: 'id',
					items: []
				}
			});

			var w = new pwl.widget.form.CheckList(
			{
				label_store: s1_label,
				value_store: s1_value,

				formatter: function (i_item )
				{
					var given_name = this.label_store.getValue(i_item, 'given_name');
					var family_name = this.label_store.getValue(i_item, 'family_name');

					return given_name + ' ' + family_name;
				}
			}, 'W1').startup();


			var w = new pwl.widget.form.CheckList(
			{
				label_store: s1_label,
				value_store: s2_value,
				enable_search: true,
				search_attribute: 'family_name',

				formatter: function (i_item )
				{
					var given_name = this.label_store.getValue(i_item, 'given_name');
					var family_name = this.label_store.getValue(i_item, 'family_name');

					return given_name + ' ' + family_name;
				}
			}, 'W2').startup();
			*/
		});
	</script>

</head>
<body class="proxia tundra">

	<h1 class="testTitle">pwl.widget.form.TwoLevelCheckList</h1>

	<div style="width:800px;height:500px;outline: 1px solid lime">
		<div dojoType="pwl.widget.form.TwoLevelCheckList" label_store_id_attribute="organization" value_store_id_attribute="organization" id="W1"></div>
	</div>

</body>
</html>